<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peoples list</title>
    <style>
        body{
            background-color: #333;
            color: #fff;
            font-family: Arial, Helvetica, sans-serif;
        }
        .list-container{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .list-item{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 10px;
            padding: 10px;
            gap: 10px;
            border-radius: 10px;
            background-color: #9e1b8a;
            color: #fff;
            list-style: none;    
        }
        ul li{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: start;
            margin: 10px;
            padding: 10px;
            gap: 10px;
            border-radius: 10px;
            background-color: #3a9147;
            color: #fff;
            list-style: none;
            width: 300px;
            max-width: 90%;
        }
        a{
            text-decoration: none;
            color: #fff;
            background-color: #ba3799;
            padding: 10px;
            margin: 10px 10px 10px 0px;
            border-radius: 10px;    
        }
        button{
            cursor: pointer;
            background-color: #ba3799;
            color: #fff;
            border-radius: 10px;
            padding: 10px;
            margin: 10px 10px 10px 0px;
        }
        
    </style>
</head>
<body>

    <div class="list-container">
        <h2>Peoples list</h3>
            <% if (successMsg) { %>
    <div id="message-container" style="background-color: #4CAF50; color: white; padding: 15px; text-align: center; margin-bottom: 20px;">
        <%= successMsg.replace(/\+/g, ' ') %>
    </div>
<% } else if (errorMsg) { %>
    <div id="message-container" style="background-color: #f44336; color: white; padding: 15px; text-align: center; margin-bottom: 20px;">
        <%= errorMsg.replace(/\+/g, ' ') %>
    </div>
<% } %>

<div class="list-container">
    </div>

        <ul class="list-item">
            <% for (let i = 0; i < people.length; i++) { %>
                
                
                <li>
                    SL.NO:<%= i + 1 %><br>
                    Name:<%= people[i].name %><br>     
                    Age:<%= people[i].age %><br>
                    Email:<%= people[i].email %><br>
                    <a href="/update/<%=people[i]._id %>">Update</a>
                    <form action="/delete/<%=people[i]._id%>?_method=DELETE" method="POST">
                    <button type="submit">Delete</button>   
                    </form>
                    

                </li>
                

            <% } %>

            
        </ul>

        <a href="/">Go back</a>
    
    </div>
   <script>
    document.addEventListener('DOMContentLoaded', function() {
        const msgContainer = document.getElementById('message-container');
        if (msgContainer) {
            // Set a timeout to remove the message after 5 seconds
            setTimeout(() => {
                msgContainer.style.transition = 'opacity 1s ease-out';
                msgContainer.style.opacity = '0';
                
                // Remove the element completely after the fade out
                setTimeout(() => {
                    msgContainer.remove();
                }, 1000); 
            }, 5000); 
        }
    });
</script>
</body>
</html>